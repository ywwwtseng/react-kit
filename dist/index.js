var we=Object.defineProperty;var be=(e,t)=>{for(var r in t)we(e,r,{get:t[r],enumerable:!0})};import{default as yi}from"react-hot-toast";import q from"react";var Re={size:{12:{fontSize:"8rem",lineHeight:"1"},11:{fontSize:"6rem",lineHeight:"1"},10:{fontSize:"4.5rem",lineHeight:"1"},9:{fontSize:"3.75rem",lineHeight:"1"},8:{fontSize:"2.25rem",lineHeight:"2.5rem"},7:{fontSize:"1.875rem",lineHeight:"2.25rem"},6:{fontSize:"1.5rem",lineHeight:"2rem"},5:{fontSize:"1.25rem",lineHeight:"1.75rem"},4:{fontSize:"1.125rem",lineHeight:"1.75rem"},3:{fontSize:"1rem",lineHeight:"1.5rem"},2:{fontSize:"0.875rem",lineHeight:"1.25rem"},1:{fontSize:"0.75rem",lineHeight:"1rem"}}},L=q.memo(({as:e="p",align:t="left",weight:r=400,size:i="3",className:n,ellipsis:o=!1,lineClamp:s,capitalize:a=!1,whitespacePreWrap:l=!1,noWrap:m=!1,dangerouslySetInnerHTML:c=!1,children:u,...d})=>q.createElement(e,{className:n,style:{textAlign:t,fontWeight:r,...Re.size[i],...o?{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}:{},...s?{WebkitLineClamp:s,display:"-webkit-box",WebkitBoxOrient:"vertical",overflow:"hidden"}:{},...a?{textTransform:"capitalize"}:{},...l?{whiteSpace:"pre-wrap"}:{},...m?{whiteSpace:"nowrap"}:{},...d},...c?{dangerouslySetInnerHTML:{__html:u}}:{children:u}}));import{useEffect as _,useState as J}from"react";import{jsx as Ie}from"react/jsx-runtime";function ke(e){return String(e).replace(/(-?)(\d*)\.?(\d*)e([+-]\d+)/,(t,r,i,n,o)=>{o=Number(o);let s=i+n;if(o<0){let a=i.length+o;return r+"0."+"0".repeat(-a)+s}else return r+s+"0".repeat(o-n.length)})}function Te(){let e=navigator.userAgent,t=navigator.maxTouchPoints>0;return/Android|iPhone|iPad|iPod|Windows Phone/i.test(e)||t}function Ae(e){if(!e)return"";let t=e.split("."),r=t[0]||"";if(r===""||/^0+$/.test(r)){let o=r;return t.length>1?`${o}.${t[1]}`:e.endsWith(".")?`${o}.`:o}let i=r.match(/^(0+)/);if(i){let o=i[1],s=r.slice(o.length);if(s){let a=s.replace(/\B(?=(\d{3})+(?!\d))/g,","),l=o+a;return t.length>1?`${l}.${t[1]}`:e.endsWith(".")?`${l}.`:l}}let n=r.replace(/\B(?=(\d{3})+(?!\d))/g,",");return t.length>1?`${n}.${t[1]}`:e.endsWith(".")?`${n}.`:n}function ir({decimal:e=0,value:t,onChange:r,onInputChange:i,maxDigits:n,...o}){let[s,a]=J(t),[l,m]=J(!1);return _(()=>{s==="."&&t===""||(s==="0"&&t===""&&a(""),Number(s)!==Number(t)&&a(s!==""&&t===""?"":t))},[t,s]),_(()=>{i?.(s)},[s,i]),Ie("input",{...o,className:o.className?`input ${o.className}`:"input",type:"text",value:l?s:Ae(s),onChange:c=>{Te()&&m(!0);let u=c.target.value.replace(/,/g,"");if(u===""||u==="."){a(u),r("");return}if(u.startsWith(".")&&u.length>1){let f=s.replace(/,/g,"");f.startsWith("0.")&&f.slice(1)===u||(u="0"+u)}if((u.match(/\./g)||[]).length>1||!/^\.?\d*\.?\d*$/.test(u)||typeof n=="number"&&u.replace(".","").length>n)return;if(e===0){u==="0"?(a(""),r("")):(a(u.replace(".","")),r(u.replace(".","")));return}let d=u.split(".")[1];d&&d.length>e||Number(u)>=0&&(a(u),r(ke(Number(u))))}})}import{jsx as w}from"react/jsx-runtime";function Me({className:e,style:t,children:r}){return w("div",{className:e,style:{display:"flex",flexDirection:"column",width:"100vw",height:"100vh",overflow:"hidden",...t},children:r})}function Ne({style:e,children:t}){return w("div",{style:{width:"100vw",left:0,top:0,padding:"8px 16px",position:"fixed",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px",zIndex:1,pointerEvents:"auto",...e},children:t})}function He({style:e,children:t}){return w("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"8px",flex:1,...e},children:t})}function Ve({style:e,children:t}){return w("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",flex:1,...e},children:t})}function Ee({style:e,children:t}){return w("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"8px",flex:1,...e},children:t})}function De({ref:e,style:t,children:r}){return w("div",{ref:e,style:{height:"100vh",overflowY:"auto",...t},children:r})}var pr={Root:Me,Header:Ne,HeaderLeft:He,HeaderRight:Ee,HeaderTitle:Ve,Main:De};import{jsx as Oe}from"react/jsx-runtime";function F({items:e,children:t,...r}){return Oe("div",{...r,children:e.map(i=>t(i))})}import{jsx as Le}from"react/jsx-runtime";function dr({style:e,items:t,renderItem:r}){return Le(F,{style:{width:"100vw",left:0,bottom:0,padding:"4px 16px 0px",position:"fixed",display:"flex",alignItems:"start",justifyContent:"space-between",...e},items:t,children:i=>r(i)})}import ze from"clsx";import{Drawer as C}from"vaul";import{jsx as b,jsxs as z}from"react/jsx-runtime";function Y({type:e="default",handle:t=!0,trigger:r,title:i,children:n,classes:o,...s}){let a=e==="default"?C.Root:C.NestedRoot;return z(a,{...s,children:[r&&b(C.Trigger,{asChild:!0,children:r}),z(C.Portal,{children:[b(C.Overlay,{style:{position:"fixed",inset:"0",zIndex:9999}}),b(C.Content,{style:{position:"fixed",zIndex:9999,bottom:0,left:0,right:0,margin:"0 4px 28px"},children:z("div",{className:ze(o?.content,"bg-modal"),style:{paddingTop:16,borderRadius:10,display:"flex",alignItems:"center",flexDirection:"column",width:"100%",height:"100%",gap:16},children:[b(C.Title,{className:"hidden",children:i}),b(C.Description,{className:"hidden",children:i}),t&&b(C.Handle,{}),n]})})]})]})}import{useState as Be,useMemo as Ge}from"react";import{jsx as X,jsxs as We}from"react/jsx-runtime";function j(e){return We("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24","aria-hidden":"true",className:"animate-spin text-white/50 fill-white/80",viewBox:"0 0 100 101",fill:"none",...e,children:[X("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),X("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]})}import{jsx as ee}from"react/jsx-runtime";function wr(e){return ee("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"1.5","aria-hidden":"true",...e,children:ee("path",{d:"m6 9 6 6 6-6"})})}import{jsx as te}from"react/jsx-runtime";function kr(e){return te("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5","aria-hidden":"true",...e,children:te("path",{d:"M20 6 9 17l-5-5"})})}var re={};be(re,{EN:()=>$e,TW:()=>Qe});import{jsx as v,jsxs as H}from"react/jsx-runtime";function $e(e){return H("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 512 512",...e,children:[v("mask",{id:"a",children:v("circle",{cx:"256",cy:"256",r:"256",fill:"#fff"})}),H("g",{mask:"url(#a)",children:[v("path",{fill:"#eee",d:"m0 0 8 22-8 23v23l32 54-32 54v32l32 48-32 48v32l32 54-32 54v68l22-8 23 8h23l54-32 54 32h32l48-32 48 32h32l54-32 54 32h68l-8-22 8-23v-23l-32-54 32-54v-32l-32-48 32-48v-32l-32-54 32-54V0l-22 8-23-8h-23l-54 32-54-32h-32l-48 32-48-32h-32l-54 32L68 0H0z"}),v("path",{fill:"#0052b4",d:"M336 0v108L444 0Zm176 68L404 176h108zM0 176h108L0 68ZM68 0l108 108V0Zm108 512V404L68 512ZM0 444l108-108H0Zm512-108H404l108 108Zm-68 176L336 404v108z"}),v("path",{fill:"#d80027",d:"M0 0v45l131 131h45L0 0zm208 0v208H0v96h208v208h96V304h208v-96H304V0h-96zm259 0L336 131v45L512 0h-45zM176 336 0 512h45l131-131v-45zm160 0 176 176v-45L381 336h-45z"})]})]})}function Qe(e){return H("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 512 512",...e,children:[v("mask",{id:"a",children:v("circle",{cx:"256",cy:"256",r:"256",fill:"#fff"})}),H("g",{mask:"url(#a)",children:[v("path",{fill:"#d80027",d:"M0 256 256 0h256v512H0z"}),v("path",{fill:"#0052b4",d:"M256 256V0H0v256z"}),v("path",{fill:"#eee",d:"m222.6 149.8-31.3 14.7 16.7 30.3-34-6.5-4.3 34.3-23.6-25.2-23.7 25.2-4.3-34.3-34 6.5 16.7-30.3-31.2-14.7 31.2-14.7-16.6-30.3 34 6.5 4.2-34.3 23.7 25.3L169.7 77l4.3 34.3 34-6.5-16.7 30.3z"}),v("circle",{cx:"146.1",cy:"149.8",r:"47.7",fill:"#0052b4"}),v("circle",{cx:"146.1",cy:"149.8",r:"41.5",fill:"#eee"})]})]})}import{jsx as ie}from"react/jsx-runtime";var Ue={primary:"#3b82f6",secondary:"rgba(66,66,66,0.8)",active:"#10b981",destructive:"#ef4444"},ne={xs:{fontSize:"0.75rem",minHeight:"32px",padding:"0.25rem 0.5rem"},sm:{fontSize:"0.875rem",minHeight:"40px",padding:"0.5rem 0.75rem"},md:{fontSize:"1.125rem",minHeight:"48px",padding:"0.75rem 1rem"}},oe={sm:"0.125rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem",full:"9999px"},Ke=(e,t=.9)=>{if(e.startsWith("rgb")){let s=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?/);if(s){let l=(s[4]?parseFloat(s[4]):1)*t;return`rgba(${s[1]}, ${s[2]}, ${s[3]}, ${l})`}}let r=e.replace("#",""),i=parseInt(r.substring(0,2),16),n=parseInt(r.substring(2,4),16),o=parseInt(r.substring(4,6),16);return`rgba(${i}, ${n}, ${o}, ${t})`};function W({variant:e="text",width:t,size:r="md",color:i="primary",textColor:n="#ffffff",rounded:o,isLoading:s=!1,children:a,onClick:l,style:m,disabled:c,...u}){let[d,f]=Be(!1),h=Ge(()=>{let p={display:"flex",alignItems:"center",justifyContent:"center",cursor:c?"not-allowed":"pointer",outline:"none",border:"none",opacity:c?.5:1,transition:"all 0.2s ease-in-out",whiteSpace:"nowrap",...m};if(t==="full"&&(p.width="100%"),r){let g=ne[r];p.fontSize=g.fontSize,p.minHeight=g.minHeight,e!=="icon"&&(p.padding=g.padding)}if(o?p.borderRadius=oe[o]:e==="icon"&&(p.borderRadius=oe.full),e==="icon"&&r){let g=ne[r].minHeight;p.width=g,p.height=g,p.padding="0"}let y=Ue[i]??i,x=d&&!c?Ke(y,.9):y;return e==="text"?(p.backgroundColor="transparent",p.color=x):(e==="contained"||e==="icon")&&(p.backgroundColor=x,p.color=n),p},[e,t,r,i,o,d,c,m]);return ie("button",{style:h,onClick:p=>{s||c||l?.(p)},onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),disabled:c||s,...u,children:s?ie(j,{width:24,height:24}):a})}import{cva as Ze}from"class-variance-authority";import qe from"clsx";import{jsx as Je}from"react/jsx-runtime";var _e=Ze("focus:outline-none outline-none placeholder:text-placeholder",{variants:{},defaultVariants:{},compoundVariants:[]});function Br({className:e,...t}){return Je("input",{className:qe(_e({className:e})),...t})}import{cva as Fe}from"class-variance-authority";import Ye from"clsx";import{jsx as je}from"react/jsx-runtime";var Xe=Fe("focus:outline-none outline-none resize-none placeholder:text-placeholder",{variants:{},defaultVariants:{},compoundVariants:[]});function qr({className:e,...t}){return je("textarea",{className:Ye(Xe({className:e})),...t})}import{useEffect as et,useRef as tt}from"react";import{jsx as rt}from"react/jsx-runtime";function Yr({image:e,size:t=40,...r}){let i=tt(null);return et(()=>{if(e){let n=i.current;if(n){n.width=t,n.height=t;let o=n.getContext("2d");o&&o.drawImage(e,0,0,t,t)}}},[e,t]),rt("canvas",{ref:i,...r,width:t,height:t})}import{jsx as k,jsxs as se}from"react/jsx-runtime";function sn({title:e,description:t,onOpenChange:r,cancel:i,confirm:n,...o}){return se(Y,{title:e,onOpenChange:r,...o,children:[k(L,{size:"2",children:e}),k("div",{className:"px-4 pb-4",children:k(L,{size:"1",children:t})}),se("div",{style:{display:"flex",width:"100%",gap:24,padding:"16px 24px"},children:[k(W,{width:"full",rounded:"full",variant:"contained",color:"secondary",size:"sm",onClick:()=>{r(!1)},children:"Cancel",...i}),k(W,{width:"full",rounded:"full",variant:"contained",size:"sm",color:"destructive",...n,onClick:s=>{r(!1),n.onClick?.(s)}})]})]})}import ae from"react";function V(e){let t=ae.useRef(e);return ae.useEffect(()=>{t.current=e},[e]),t}import{useEffect as nt,useRef as ot}from"react";function fn(e){let t=ot(!0);nt(()=>{if(!t.current)return;t.current=!1;let r=e();return()=>{r&&r()}},[])}import{useEffect as it,useState as st}from"react";function gn(){let[e,t]=st(!1);return it(()=>{t(!0)},[]),e}import{useState as at}from"react";function xn(){let[e,t]=at(!1);return{isOpen:e,onOpenChange:o=>{t(o)},onOpen:()=>{t(!0)},onClose:()=>{t(!1)}}}import{useState as pt,useEffect as ct}from"react";function Cn(e,t=500){let[r,i]=pt(e);return ct(()=>{let n=setTimeout(()=>{i(e)},t);return()=>clearTimeout(n)},[e,t]),r}import{use as ht,useMemo as me,useRef as xt,useEffect as vt}from"react";import{Drawer as T}from"vaul";import{jsx as A,jsxs as lt}from"react/jsx-runtime";function pe({title:e,description:t,style:r,children:i}){return A(T.Root,{handleOnly:!0,direction:"right",open:!!i,repositionInputs:!1,children:A(T.Portal,{children:lt(T.Content,{style:{height:"100vh",minHeight:"100vh",position:"fixed",top:0,bottom:0,left:0,right:0,outline:"none"},children:[A(T.Title,{style:{display:"none"},children:e}),A(T.Description,{style:{display:"none"},children:t}),A("div",{style:{width:"100%",height:"100%",overflowY:"auto",...r},children:i})]})})})}import{createContext as ut,use as le,useState as ft,useCallback as mt,useMemo as ce,useEffect as dt}from"react";import{parseJSON as gt}from"@ywwwtseng/ywjs";import{jsx as yt}from"react/jsx-runtime";var ue=(i=>(i.PAGE="page",i.DRAWER="drawer",i.SINGLE="single",i))(ue||{}),I=ut({route:void 0,screens:{},stacks:[],navigate:(e,t)=>{}});function An({screens:e,children:t}){let[r,i]=ft(()=>typeof window>"u"?[]:[gt(sessionStorage.getItem("navigator/screen"))||{screen:"Home",params:{}}]),n=ce(()=>{let a=r[r.length-1];if(!a)return;let l=e[a.screen];if(l)return{name:a.screen,params:a.params,type:l.type,title:l.title,screen:l.screen,back:l.back}},[r,e]),o=mt((a,l)=>{if(typeof a=="string"&&!Object.keys(e).includes(a)){console.warn(`Screen ${a} not found`);return}let m=l?.type||"push";i(c=>{if(a===-1&&c.length>1)return c.slice(0,-1);if(typeof a=="string"){let u={screen:a,params:l?.params||{}};return m==="replace"?[...c.slice(0,-1),u]:c[c.length-1]?.screen===a?[...c.slice(0,-1),u]:[...c,u].slice(-10)}return c})},[e]),s=ce(()=>({route:n,navigate:o,screens:e,stacks:r}),[n,o,e,r]);return dt(()=>{n&&n.type!=="drawer"&&sessionStorage.setItem("navigator/screen",JSON.stringify({screen:n.name,params:n.params}))},[n]),yt(I.Provider,{value:s,children:typeof t=="function"?t(s):t})}var fe=()=>{let e=le(I);if(!e)throw new Error("useNavigate must be used within a StackNavigator");return e.navigate},E=()=>{let e=le(I);if(!e)throw new Error("useRoute must be used within a StackNavigator");return e.route};import{Fragment as St,jsx as D,jsxs as Ct}from"react/jsx-runtime";function On({drawer:e={style:{}}}){let t=xt(null),{route:r,stacks:i,screens:n}=ht(I),o=me(()=>{if(r.type!=="page"){let a=r.screen;return D(pe,{title:r.title,description:r.title,style:e.style,children:D(a,{params:r.params})})}},[r]),s=me(()=>{if(r.type!=="page"){let a=i[i.length-2];return a?n[a.screen].screen:void 0}return r.screen},[r,i,n]);if(vt(()=>{t.current&&(t.current.scrollTop=0)},[r]),!(!s&&!o))return Ct(St,{children:[s&&D("div",{ref:t,style:{height:"100%",overflowY:"auto",display:o?"none":"block"},children:D(s,{params:r.params})}),o]})}import{AppError as ge}from"@ywwwtseng/ywjs";import{useRef as It,useMemo as ye,useCallback as he,createContext as Mt}from"react";import{Request as Nt}from"@ywwwtseng/request";import{createContext as Pt,useCallback as wt,useMemo as bt}from"react";import{create as Rt}from"zustand";import{produce as kt}from"immer";import{merge as Tt}from"@ywwwtseng/ywjs";import{jsx as At}from"react/jsx-runtime";var M=Pt(void 0),S=Rt(e=>({state:{},loading:[],update:t=>{e(r=>kt(r,i=>{for(let n of t){if(n.type==="update"&&typeof n.payload=="function")return n.payload(i);if(n.type==="update"&&n.target)i.state[n.target]=n.payload;else if(n.type==="merge"&&n.target)i.state[n.target]=Tt(i.state[n.target],n.payload);else if(n.type==="replace"){let o=n.payload,s=n.target||"id";if(typeof o=="object"&&o&&s in o)for(let a of Object.keys(i.state)){let l=i.state[a];if(!Array.isArray(l))continue;let m=l.findIndex(c=>{if(c[s]!==o[s])return!1;let u=Object.keys(c),d=Object.keys(o);return u.length!==d.length?!1:u.every(f=>d.includes(f))});m!==-1&&(l[m]=o)}}else if(n.type==="unshift"&&n.target){let o=i.state[n.target];Array.isArray(o)&&o.unshift(n.payload)}else if(n.type==="push"&&n.target){let o=i.state[n.target];Array.isArray(o)&&o.push(n.payload)}else if(n.type==="delete"&&n.target){let o=n.payload,s=n.target||"id";for(let a of Object.keys(i.state)){let l=i.state[a];if(!Array.isArray(l))continue;let m=l.findIndex(c=>c[s]===o);m!==-1&&l.splice(m,1)}}}}))}}));function de({children:e}){let{update:t}=S(),r=wt(n=>{t([{type:"update",target:"state",payload:o=>{delete o.state[n]}}])},[t]),i=bt(()=>({update:t,clear:r}),[t,r]);return At(M.Provider,{value:i,children:e})}function P(e,t){return t&&Object.keys(t).length>0?JSON.stringify({path:e,params:t}):e}import{jsx as Ht}from"react/jsx-runtime";var $=Mt(void 0);function xe({url:e,transformRequest:t,onError:r,children:i}){let n=It([]),o=fe(),{update:s}=S(),a=ye(()=>new Nt({transformRequest:t}),[t]),l=he(async(u,d,f)=>{let h=P(u,d);n.current.push(h),s([{type:"update",target:"loading",payload:p=>{p.loading.push(h)}}]);try{let p=await a.post(e,{type:"query",path:u,params:d??{}});if(p.commands&&s(p.commands),p.error)throw new ge(p.error,p.message??"Unknown error");return p.navigate&&o(p.navigate.screen,{type:"replace",params:p.navigate.params}),p.notify&&f?.onNotify?.(p.notify),{key:h,data:p}}catch(p){throw r?.(p),p}finally{n.current=n.current.filter(p=>p!==h),s([{type:"update",target:"loading",payload:p=>{p.loading=p.loading.filter(y=>y!==h)}}])}},[a]),m=he(async(u,d)=>{try{let f;if(d instanceof FormData?(d.append("mutation:type","mutate"),d.append("mutation:action",u),f=await a.post(e,d)):f=await a.post(e,{type:"mutate",action:u,payload:d}),f.error)throw new ge(f.error,f.message??"Unknown error");return f.commands&&s(f.commands),f.navigate&&o(f.navigate.screen,{type:"replace",params:f.navigate.params}),{data:f}}catch(f){throw r?.(f),f}},[a]),c=ye(()=>({query:l,mutate:m,loadingRef:n}),[l,m,n]);return Ht($.Provider,{value:c,children:i})}import{Toaster as $t}from"react-hot-toast";import{useCallback as Et,useMemo as Q,createContext as Dt,use as po}from"react";import{get as Ot,getLocale as Lt,translate as zt}from"@ywwwtseng/ywjs";import{get as Vt}from"@ywwwtseng/ywjs";function ve(e){return S(t=>Vt(t.state,e))}import{jsx as Wt}from"react/jsx-runtime";var B=Dt(void 0);function Se({locales:e,path:t=["me","language_code"],callback:r="en",children:i}){let n=ve(t[0]),o=Q(()=>n&&Ot(n,t.slice(1))||r,[n,t,r]),s=Q(()=>e?Lt(e,o,e[r]):null,[o,r,e]),a=Et((m,c)=>s?zt(s,m,c):m,[s]),l=Q(()=>({language_code:o,t:a}),[s,a]);return Wt(B.Provider,{value:l,children:i})}import{jsx as G,jsxs as Qt}from"react/jsx-runtime";function Co({url:e,transformRequest:t,onError:r,i18nProps:i={},toasterProps:n={},children:o}){return Qt(de,{children:[G(xe,{url:e,transformRequest:t,onError:r,children:G(Se,{...i,children:o})}),G($t,{...n})]})}import{use as Gt,useMemo as U,useState as Ut,useCallback as Kt,useEffect as Zt}from"react";import{use as Bt}from"react";function R(){let e=Bt($);if(!e)throw new Error("useClient must be used within a ClientProvider");return e}var qt=e=>Array.isArray(e)?e?.[e.length-1]?.created_at??null:null;function Ho(e,t){let r=E(),i=t?.refetchOnMount??!1,n=t?.enabled??!0,o=S(p=>p.state),[s,a]=Ut([]),l=U(()=>s.map(p=>o[p]).filter(Boolean),[s,o]),{update:m}=Gt(M),{query:c,loadingRef:u}=R(),d=U(()=>{let p=l[l.length-1];if(Array.isArray(p)){let y=t.params?.limit;if(typeof y=="number")return p.length===y;if(p.length===0)return!1}return!0},[l]),f=Kt(()=>{if(!d)return;let p=t?.params??{};if(!n)return;let y=qt(l?l[l.length-1]:void 0);y&&(p.cursor=y);let x=P(e,p);u.current.includes(x)||(a(g=>[...g,x]),c(e,p))},[e,JSON.stringify(t),d,n,l]),h=U(()=>n&&s.length>0?o[s[s.length-1]]===void 0:!1,[s,o,n]);return Zt(()=>{if(!n)return;let p=t?.params??{},y=P(e,p);if(!u.current.includes(y)&&!(o[y]!==void 0&&i===!1))return a(x=>[...x,y]),c(e,p),()=>{i&&(m([{type:"update",payload:x=>{s.forEach(g=>{delete x.state[g]})}}]),a([]))}},[e,JSON.stringify(t),n,r.name]),{data:l.length>0?l.flat():void 0,isLoading:h,hasNextPage:d,fetchNextPage:f}}import{useState as Ft,useCallback as Yt}from"react";import{useCallback as Jt}from"react";import Pe from"react-hot-toast";import{use as _t}from"react";function Ce(){let e=_t(B);if(!e)throw console.trace("useI18n must be used within a I18nProvider"),new Error("useI18n must be used within a I18nProvider");return e}function O(){let{t:e}=Ce();return Jt((t,r,i)=>{(Pe[t]||Pe)?.(e?.(r,i)??r)},[e])}function Ko(e,{onError:t,onSuccess:r}={}){let i=R(),n=O(),[o,s]=Ft(!1),a=V(o);return{mutate:Yt(m=>a.current?Promise.reject({message:"Already loading"}):(a.current=!0,s(!0),i.mutate(e,m).then(({data:c})=>(c.notify&&n(c.notify.type,c.notify.message,c.notify.params),r?.(c),c)).catch(c=>{t?.(c.data);let u=c.data.info??{};return n("error",c.data.message??"Unknown error",u),{ok:!1}}).finally(()=>{a.current=!1,s(!1)})),[i.mutate,e,n]),isLoading:o}}import{use as Xt,useEffect as K,useCallback as jt,useMemo as er,useRef as Z}from"react";function ei(e,t){let r=Z(!1),i=O(),n=V(i),{query:o,loadingRef:s}=R(),{clear:a}=Xt(M),l=E(),m=Z(l.name),c=er(()=>P(e,t?.params??{}),[e,JSON.stringify(t?.params??{})]),u=Z(c),d=t?.params??{},f=t?.refetchOnMount??!1,h=t?.enabled??!0,p=S(g=>g.loading).includes(c),y=S(g=>g.state[c]),x=jt(()=>{h&&(s.current.includes(c)||o(e,d).then(({key:g})=>{t?.autoClearCache&&g!==u.current&&a(g)}))},[c,h,l.name]);return K(()=>(u.current=c,()=>{t?.autoClearCache&&a(c)}),[c]),K(()=>()=>{r.current=!0},[]),K(()=>{r.current||h&&(s.current.includes(c)||y!==void 0&&f===!1||f&&m.current!==l.name||o(e,d).then(({key:g,data:N})=>{N.notify&&n.current(N.notify.type,N.notify.message,N.notify.params),t?.autoClearCache&&g!==u.current&&a(g)}))},[c,h,l.name]),{refetch:x,isLoading:p,data:y}}export{ir as AmountInput,Co as AppProvider,M as AppStateContext,de as AppStateProvider,W as Button,Yr as Canvas,kr as Check,wr as ChevronDown,$ as ClientContext,xe as ClientProvider,sn as Confirm,re as Flag,Br as Input,pr as Layout,F as List,Y as Modal,ue as ScreenType,j as Spinner,I as StackNavigatorContext,An as StackNavigatorProvider,On as StackView,dr as TabBar,qr as Textarea,L as Typography,Ae as formatAmount,P as getQueryKey,_e as inputVariants,Xe as textareaVariants,yi as toast,ve as useAppState,S as useAppStateStore,R as useClient,fn as useClientOnce,Cn as useDebounce,xn as useDisclosure,Ce as useI18n,Ho as useInfiniteQuery,gn as useIsMounted,Ko as useMutation,fe as useNavigate,ei as useQuery,V as useRefValue,E as useRoute};
